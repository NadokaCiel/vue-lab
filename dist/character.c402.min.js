webpackJsonp([1],{482:function(t,e,a){function n(t){a(696)}var r=a(75)(a(698),a(699),n,"data-v-791ec831",null);t.exports=r.exports},483:function(t,e,a){function n(t){a(700)}var r=a(75)(a(702),a(703),n,"data-v-ef3220c6",null);t.exports=r.exports},508:function(t,e,a){var n=a(75)(a(509),a(510),null,null,null);t.exports=n.exports},509:function(t,e,a){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){function n(r,i){try{var o=e[r](i),c=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});t(c)}return n("next")})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{clickFunc:{type:Array,default:function(){return[]}},type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean},data:function(){return{innerLoading:!1}},methods:{handleClick:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this,!(a.clickFunc.length>0)){t.next=12;break}return a.innerLoading=!0,t.prev=3,t.next=6,(r=a.clickFunc)[0].apply(r,n(a.clickFunc.slice(1)));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3);case 11:a.innerLoading=!1;case 12:case"end":return t.stop()}},t,this,[[3,8]])}));return t}()}}},510:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{attrs:{type:t.type,size:t.size,icon:t.icon,nativeType:t.nativeType,loading:t.innerLoading,disabled:t.disabled,plain:t.plain,autofocus:t.autofocus},on:{click:t.handleClick}},[t.$slots.default?a("span",[t._t("default")],2):t._e()])},staticRenderFns:[]}},696:function(t,e,a){var n=a(697);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(471)("a356a4d4",n,!0)},697:function(t,e,a){e=t.exports=a(149)(void 0),e.push([t.i,".character-list .tool[data-v-791ec831]{margin:20px auto;width:80%}.character-list .my-list[data-v-791ec831]{text-align:center;margin:20px auto;width:80%}.character-list .my-list .tag[data-v-791ec831]{margin:4px}.character-list .my-list .tag.physical[data-v-791ec831]{color:#fe4c40;background-color:#fcc;border-color:#fe4c40}.character-list .my-list .tag.spell[data-v-791ec831]{color:#96c;background-color:#d9b3e6;border-color:#96c}.character-list .my-list .tag.supporter[data-v-791ec831]{color:#199475;background-color:#9c3;border-color:#199475}.character-list .my-list .line-btn[data-v-791ec831]{margin:0 10px}",""])},698:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(57);e.default={name:"character-list",created:function(){this.getList()},data:function(){return{typeMap:{physical:"physical",spell:"spell",supporter:"supporter"},list:[],page:1,total:0,size:10}},methods:{toAdd:function(){this.$router.push({name:"Character-Edit",params:{id:0}})},toEdit:function(t){this.$router.push({name:"Character-Edit",params:{id:t}})},sizeChange:function(t){this.size=t,this.getList()},pageChange:function(t){this.page=t,this.getList()},getList:function(){var t=this;t.$ajax("get","/api/character",{page:t.page,size:t.size},function(e){e.list.forEach(function(t){t.showDelete=!1}),t.list=e.list,t.total=e.total},function(t){})},deleteLine:function(t){var e=this,a=t._id;return e.$ajax("delete","/api/character/"+a,{},function(t){e.getList()},function(t){})}},computed:(0,n.mapState)({}),watch:{},components:{}}},699:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"character-list"},[a("div",{staticClass:"tool"},[a("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.toAdd}})],1),a("el-table",{staticClass:"my-list",attrs:{data:t.list,border:"","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"name",label:"Name"}}),a("el-table-column",{attrs:{prop:"type",label:"Type",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.types,function(e){return a("el-tag",{key:e,staticClass:"tag",class:[t.typeMap[e]],attrs:{type:"success","close-transition":""}},[t._v(t._s(e))])})}}])}),a("el-table-column",{attrs:{label:"Create Time",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("date")(e.row.Created_date))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"Operation",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"line-btn",attrs:{type:"text",size:"mini"},on:{click:function(a){t.toEdit(e.row._id)}}},[t._v("Edit")]),a("el-popover",{attrs:{width:"160"},model:{value:e.row.showDelete,callback:function(t){e.row.showDelete=t},expression:"scope.row.showDelete"}},[a("p",[t._v("确定删除吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.showDelete=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.deleteLine(e.row)}}},[t._v("确定")])],1),a("el-button",{staticClass:"line-btn",attrs:{type:"text",size:"mini"},slot:"reference"},[t._v("Delete")])],1)]}}])})],1),a("el-pagination",{staticClass:"tool",attrs:{"current-page":t.page,"page-sizes":[5,10,15,20],"page-size":t.size,layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1)},staticRenderFns:[]}},700:function(t,e,a){var n=a(701);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(471)("6b1e3a02",n,!0)},701:function(t,e,a){e=t.exports=a(149)(void 0),e.push([t.i,".character-edit .my-form[data-v-ef3220c6]{margin:20px auto;padding-right:30%;width:80%}",""])},702:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(57),r=a(508),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={name:"character-edit",created:function(){var t=this;t.$route.params&&t.$route.params.id&&(t.id=t.$route.params.id,t.getData())},data:function(){return{id:0,form:{name:"",types:[]},typeOptions:[{value:"physical",label:"Physical"},{value:"spell",label:"Spell"},{value:"supporter",label:"Supporter"}]}},methods:{toList:function(){this.$router.push({name:"Character-List"})},getData:function(){var t=this;return t.$ajax("get","/api/character/"+t.id,{},function(e){t.form=e},function(t){})},save:function(){var t=this;return t.id?t.$ajax("put","/api/character/"+t.id,t.form,function(e){t.toList()},function(t){}):t.$ajax("post","/api/character",t.form,function(e){t.toList()},function(t){})}},computed:(0,n.mapState)({}),watch:{},components:{cButton:i.default}}},703:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"character-edit"},[a("el-form",{ref:"form",staticClass:"my-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"Type"}},[a("el-select",{attrs:{placeholder:"choose a type",multiple:""},model:{value:t.form.types,callback:function(e){t.form.types=e},expression:"form.types"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),a("el-form-item",[a("c-button",{attrs:{type:"primary",clickFunc:[t.save]}},[t._v("保存")]),a("el-button",{on:{click:t.toList}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});